var xhrObj=!1,compid,bseltpval="",nseltpval="",onloadstat=0,blurflag="false",titleSensex="",titleNse="",BSE="17023928",NSE="17023929";function shoWait(){}function inputClear(a,b){a.value==b&&(a.value="",a.style.color="#000000")}function inputReset(a,b,c){c?""==document.getElementById(a).value&&(document.getElementById(a).value=b,document.getElementById(a).style.color="#888888"):(document.getElementById(a).value=b,document.getElementById(a).style.color="#888888")}
var iRemoteProcedure=0,tRemoteProcedures={};function RemoteProcedure(a,b,c){this.fnOnLoad=this.req=null;this.id=++iRemoteProcedure;tRemoteProcedures[this.id]=this;this.timer=null;this.call(a,b,c)}
RemoteProcedure.prototype.call=function(a,b,c){xhrObj&&0!=xhrObj.readyState&&xhrObj.abort();this.fnOnLoad=b;this.fnOnPatience=c;this.timer=window.setTimeout("tRemoteProcedures["+this.id+"].showPatience()",500);a.indexOf("?");window.XMLHttpRequest?(this.req=new XMLHttpRequest,this.req.onreadystatechange=new Function("tRemoteProcedures["+this.id+"].processReqChange()"),this.req.open("GET",a,!0),this.req.send(null)):window.ActiveXObject&&(this.req=new ActiveXObject("Microsoft.XMLHTTP"),this.req.onreadystatechange=
new Function("tRemoteProcedures["+this.id+"].processReqChange()"),this.req.open("GET",a,!0),this.req.send())};RemoteProcedure.prototype.showPatience=function(){this.clearTimeout();this.fnOnPatience&&this.fnOnPatience()};RemoteProcedure.prototype.clearTimeout=function(){null!=this.timer&&(window.clearTimeout(this.timer),this.timer=null)};RemoteProcedure.prototype.processReqChange=function(){4==this.req.readyState&&(this.clearTimeout(),(200==this.req.status||0==this.req.status)&&this.fnOnLoad&&this.fnOnLoad(this.req))};
function getEl(a){return document.getElementById(a)}
function updateIndexStatus(a){if(null==compid||""==compid)compid=BSE+"|"+NSE;(new Date).getTime();if(1==a)a=cdn_domain+"/money1/current_status_new.php?companylist="+compid,new RemoteProcedure(a,index_process,shoWait);else{a=parseInt(getEl("currenthrs").value);var b=parseInt(getEl("marketstart").value),c=parseInt(getEl("marketend").value);"false"==blurflag?b<=a&&c>a&&(a=cdn_domain+"/money1/current_status_new.php?companylist="+compid,new RemoteProcedure(a,index_process,shoWait)):setTimeInterval()}}
function index_process(a){a=a.responseText;if(a.indexOf("Error")&&""!=a)for(row in a=eval(a),a)"undefined"!=typeof a[row].CompanyCode&&null!==a[row].CompanyCode&&(a[row].CompanyCode==BSE?updateSensex(a[row]):a[row].CompanyCode==NSE&&updateNifty(a[row]));setToProcessBSE()}
function updateSensex(a){var b=a.LastTradedPrice;""==trim(bseltpval)&&(bseltpval=a.LastTradedPrice,onloadstat=1);var c=a.PercentageDiff;getEl("bseindex").innerHTML=a.LastTradedPrice;titleSensex="BSE: "+a.LastTradedPrice;document.getElementById("last_traded_time").innerHTML=formatTradedTime(a.LastTradedTime);0>widgetGraphStartTime.indexOf(":")&&(widgetGraphStartTime+=":00");0<=c&&0!=c?(getEl("bsearrowicon").className="iconUp",getEl("BseChange").innerHTML="+"+a.Change,getEl("BseChange").className="f11 ChangePercentGreen2",
a=a.LastTradedTime.split(",")[1].split(":")):(0>=c&&0!=c?(getEl("bsearrowicon").className="iconDown",getEl("BseChange").innerHTML=a.Change,getEl("BseChange").className="f11 ChangePercentRed2"):(getEl("bsearrowicon").className="iconNeutral",getEl("BseChange").innerHTML=a.Change,getEl("BseChange").className="f11 ChangePercentGrey2"),a=a.LastTradedTime.split(",")[1].split(":"));getEl("BsestartTime").innerHTML=widgetGraphStartTime;getEl("BseendTime").innerHTML=a[0]+":"+a[1];bseltpval!=b?(bseltpval<=b?
startFadeDec(0,153,0,255,255,255,10,"bseindex"):bseltpval>=b&&startFadeDec(255,0,0,255,255,255,10,"bseindex"),bseltpval=b):1==onloadstat&&(0<=c&&0!=c?startFadeDec(0,153,0,255,255,255,10,"bseindex"):0>=c&&0!=c&&startFadeDec(255,0,0,255,255,255,10,"bseindex"));onloadstat=0}function formatTradedTime(a){if(""!=a&&null!=a&&"null"!=a){var b=a.split(",")[0].split(" ");a=b[1];b=b[0];var c=(new Date).getFullYear();return a+" "+b+", "+c}return""}
function updateNifty(a){var b=a.LastTradedPrice;""==trim(nseltpval)&&(nseltpval=a.LastTradedPrice,onloadstat=1);var c=a.PercentageDiff;getEl("nseindex").innerHTML=a.LastTradedPrice;titleNse="NSE: "+a.LastTradedPrice;0>widgetGraphStartTime.indexOf(":")&&(widgetGraphStartTime+=":00");0<=c&&0!=c?(getEl("nsearrowicon").className="iconUp",getEl("NseChange").innerHTML="+"+a.Change,getEl("NseChange").className="f11 ChangePercentGreen2",a=a.LastTradedTime.split(",")[1].split(":")):(0>=c&&0!=c?(getEl("nsearrowicon").className=
"iconDown",getEl("NseChange").innerHTML=a.Change,getEl("NseChange").className="f11 ChangePercentRed2"):(getEl("nsearrowicon").className="iconNeutral",getEl("NseChange").innerHTML=a.Change,getEl("NseChange").className="f11 ChangePercentGrey2"),a=a.LastTradedTime.split(",")[1].split(":"));getEl("NsestartTime").innerHTML=widgetGraphStartTime;getEl("NseendTime").innerHTML=a[0]+":"+a[1];nseltpval!=b?(nseltpval<=b?startFadeDec(0,153,0,255,255,255,10,"nseindex"):nseltpval>=b&&startFadeDec(255,0,0,255,255,
255,10,"nseindex"),nseltpval=b):1==onloadstat&&(0<=c&&0!=c?startFadeDec(0,153,0,255,255,255,10,"nseindex"):0>=c&&0!=c&&startFadeDec(255,0,0,255,255,255,10,"nseindex"));onloadstat=0}function setToProcessBSE(){var a=1E3*parseInt(getEl("companyhit").value);st=setTimeout("updateIndexStatus()",a)}function setTimeInterval(){st=setTimeout("updateIndexStatus()",1E3)}function focusText(){blurflag="false"}function blurText(){blurflag="true"}function frmonblur(){blurflag="true"}
function bseChart(){new RemoteProcedure(cdn_domain+"/money1/chart_bse_widget.php",chart_generate,shoWait)}function nseChart(){new RemoteProcedure(cdn_domain+"/money1/chart_nse_widget.php",chart_generate,shoWait)}
function chart_generate(a){a=a.responseText;if(a.indexOf("Error")&&""!=a)for(row in a=eval(a),a)if("undefined"!=typeof a[row].CompanyCode&&null!==a[row].CompanyCode){if("17023928"==a[row].CompanyCode)var b="#FF6600",c="#FFF8E2";else b="#0060FF",c="#CDE3F8";var d=a[row].CompanyCode,e=a[row].LastTradedPrice.split(",");$("."+d).sparkline(e,{type:"line",width:"65px",height:"20px",spotColour:"#f80",spotRadius:"1",lineWidth:"1",lineColor:b,fillColor:c})}}
function compsearchbtn(a){var b=document.getElementById("query"),c=document.getElementById("get_quote");b=b.value.replace("&","-and-");""==trim(b)?c.action="https://track.rediff.com/click?url=___"+org_domain+"___&cmp=money-box&lnk=money-box-search&nsrv1=inhome":(b=encodeURI(b.replace(/ /g,"-")),c.action="https://track.rediff.com/click?url=___"+org_domain+a+b+"___&cmp=money-box&lnk=money-box-search&nsrv1=inhome");return!0}
function updateZb(){var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.onreadystatechange=function(){if(4==a.readyState&&200==a.status&&""!=trim(a.responseText)){var b=eval("("+a.responseText+")"),c='<span style="color: #FF6600;">';c="39284210"==b.sender_id?c+"Expert Voices":c+b.name;c=c+'</span><span style="color: #ccc;font-size: 12px;">&nbsp;- '+(b.time_ago+"</span>");b=b.strip_title;document.getElementById("mw001_widget_feeds_author").innerHTML=c;document.getElementById("mw001_widget_feeds_content").innerHTML=
b}};a.open("GET",cdn_domain+"/widget/zarabol?output=json",!0);a.send()}function changeHref(a,b){if(document.iframesfix){var c=b.replace(org_domain+"/#","");document.location.href=b;document.getElementById("ajaxnav").setAttribute("src",org_domain+"/mockpage?hash="+c)}else document.location.href=b}function trackURL(a){document.location.href=a}function trim(a){return a=a.replace(/^\s*/,"").replace(/\s*$/,"")}function goToMoneyZb(){window.open(cdn_domain+"/index.html#zb")};